エレクトロガール 引き継ぎメモ（2026-02-04時点）
■ 現在の到達点（重要）
● 睡眠・消灯システム（Phase2 完了）

明るさ（ON/OFF）と睡眠状態を分離

消灯後すぐ寝ない／暗いけど起きてる状態が存在

寝る前に DROWSY（あくび）予備動作あり

睡眠中の行動抽選：

無言（高確率）

寝言（中確率、文字表示あり）

起床（低〜中確率、明るさで重み変化）

明るくなってもすぐ起きない場合あり

睡眠中でも 文字表示・口パクは可／瞬き無し

起床セリフが正しく表示される（Phase1バグ修正済）

● キャラ描画の反転バグ修正（安全版）

体・衣装・顔（表情/瞬き/口）を
1枚のSurfaceに合成 → 最後にflip

壁反転時に顔だけ正面を向く問題を完全解消

render.py は UI含めた完全版で復旧済み

● X軸移動デバッグ強化（実装済）

F1（デバッグHUD ON）時のみ有効

← / → キーでキャラを左右移動

キャラ描画エリアをクリックして左右移動

x_offset を直接操作する方式

壁反転・顔反転・歩行ボブの確認が即可能

● 背景・衣装システム

背景画像 / 単色テーマ 両対応

background フォルダ自動検出

サムネ選択UIあり

衣装オフセット JSON 化済み

● UI構成（現状）

右上：CHAR / 設定

左下：SNACK / PET / LIGHTS / TALK

縦長寄りウィンドウサイズに調整済み

会話ウィンドウは1行表示（長文未対応）

■ 未実装・途中で止まっているもの（重要）
人格・演出

寝言セリフの内容拡充（仕組みはある）

起床後の「1拍ぼーっとする」無言ビート

あくび専用の表情・口パク演出（DROWSY見た目）

UI・表示

会話ウィンドウの 複数行対応＋ページ送り

デバッグHUDに以下を追加表示したい：

vx_px_per_sec

x_offset

flip

sleep_stage

制作支援ツール（完全未実装）

CSV → 会話JSON変換スクリプト

アセット整合性チェックCLI

存在しないID

壊れ画像

名前重複

世界観（意図的に後回し）

筐体フレーム（たまごっち的UI）

ピコピコフォント

ボタンの押下アニメ・点灯表現

■ 設計思想（次チャットで重要）

環境（明暗）と内部状態（睡眠）を分離

「何もできない状態」を作らない
→ すべては行動抽選として扱う

表示ロックより「確率と時間」で制御

デバッグ操作は F1 限定で本番挙動を汚さない

データ増やしは終盤（今は案出し・設計フェーズ）

■ 次にやるフェーズ（今の気分）

実装より アイデア出し／設計整理

新しい挙動・演出の案出し

たまごっち感・常駐感をどう尖らせるか